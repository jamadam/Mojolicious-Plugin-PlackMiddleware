=head1 NAME

MojoX::Util::BodyFilter - BodyFilter in Plack::Middleware style [EXPERIMENTAL]

=head1 SYNOPSIS

    sub startup {
        ....

        use MojoX::Util::BodyFilter;
		MojoX::Util::BodyFilter->set_mw($self, ['Some::MW1','Some::MW2'])
    }
	
	package Some::MW1;
	use strict;
	use warnings;
	use base qw( Plack::Middleware );
	
	sub call {
		
		my $self = shift;
		my $res = $self->app->(@_);
		$self->response_cb($res, sub {
			my $res = shift;
			my $h = Plack::Util::headers($res->[1]);
			if ($h->get('Content-Type') =~ 'text/html') {
				return sub {
					my $chunk = shift;
					
					### DO SOMETHING
					
					return $chunk;
				};
			}
			$res;
		});
	}

=head1 DESCRIPTION

MojoX::Util::BodyFilter allows you to activate Plack::Middleware style body
filters on after_dispatch hook.

=head1 METHODS

=head2 set_mw

	MojoX::Util::BodyFilter->set_mw($self, ['some::mw1','some::mw2'])

=head1 SEE ALSO

L<Text::PSTemplate>, L<MojoX::Renderer>

=head1 AUTHOR

Sugama Keita, E<lt>sugama@jamadam.comE<gt>

=head1 COPYRIGHT AND LICENSE

Copyright (C) 2011 by Sugama Keita.

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

=cut
